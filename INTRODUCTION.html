<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ECALELF: Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">index</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="INTRODUCTION">Introduction </a></h1><p>############################################################ # ECALELF (Ecal CALibration with ELectrons Framework) ## study and calibration with Zee and E/p ############################################################</p>
<p>All the code needed to the ECAL studies and calibration with Zee is available in this package.</p>
<p>The code in this package takes the name of ECALELF (Ecal CALibration with ELectrons Framework)</p>
<h2><a class="anchor" id="DATAFORMAT">
Dataformats</a></h2>
<p>README</p>
<p>The calibration with electrons (single and double electron samples) is performed using the alcareco data format that contains only relevant collections for the ECAL calibration with electrons.</p>
<ul>
<li><b>EcalUncalElectron</b> (ALCARAW): Special data format for rereco purpose<ul>
<li>officially produced starting from CMSSW_8_0_X release</li>
</ul>
</li>
<li><b>EcalCalElectron</b> (ALCARECO): Reduced format for RECO data<ul>
<li>can be produced from ALCARAW (<b>default</b> and <b>recommended!</b>)</li>
</ul>
</li>
</ul>
<ul>
<li>this is the stardard format after rereco of data using ECALELF (starting from ALCARAW)</li>
</ul>
<ul>
<li>can be produced starting from RECO or AOD formats</li>
</ul>
<p><b>MINIAOD</b> (for monitoring, scales &amp; smearings)</p>
<h2><a class="anchor" id="WORKFLOW">
The general calibration workflow is:</a></h2>
<div align="center">
<img src="ecalelf_schema.png" alt="ecalelf_schema.png"/>
</div>
 <p>### start from centrally produce ALCARAW (the dataset has name EcalUncal{W,Z}Electron)</p>
<ol type="1">
<li>RERECO the ALCARAW applying whatever ECAL tags (ADCtoGeV, IC, LC, Alpha) needed for test or calibration and produce a new file in ALCARECO format (due different collection names, the format is internally called <b>ALCARERECO</b>). The new file has a reduced collection of calibrated rechit of the reco electrons, new SC collections produced with the new calibrated recHits, the old reco electrons with a new SC associated CAVEAT: all the electron variables are still the old RECO one, only the reference to the new SC has been updated. This will not be fixed, since it's a wanted feature that ensures that the selected events are not changed and permit to check effectively the impact of the calibration on the same events.</li>
</ol>
<ol type="1">
<li>calculate new electron energies with the <a class="el" href="d5/dbe/classEleNewEnergiesProducer.html">EleNewEnergiesProducer</a> that creates ValueMaps that associate a float (the new energy) to the electrons</li>
</ol>
<ol type="1">
<li>define if the electron pass some selections running the <a class="el" href="d6/d81/classEleSelectionProducers.html" title="Class saving ValueMaps of floats.">EleSelectionProducers</a> that creates valueMaps of floats with the following meaning: for cut-based selections 1=pass, 0=fail for MVA selections the float is the output of the MVA</li>
</ol>
<ol type="1">
<li>for MC, produce an association map between reco electron and gen electron (data-MC match)</li>
</ol>
<ol type="1">
<li>produce a patElectron collection where the electronID floats and the new energies are imported by the patElectron and accessible by electron.electronID("selectionName") electron.userFloat("energyName") the gen electron identified by the data-MC matching step are embended in the patElectron and accessible by: electron.genLepton().eta() electron.genLepton().energy()</li>
</ol>
<ol type="1">
<li>Filter the events requiring that the electron has passed at least one selection</li>
</ol>
<ol type="1">
<li>dump the event content to a flat tree with one entry for Zee candidate (the variables are array of two elements with one electron per element)</li>
</ol>
<ol type="1">
<li>Run the analysis tools (Z fitter, smearing, etc.)</li>
</ol>
<p>### Start from RECO or AOD or AODSIM In case the purpose is just to run on a particular dataset without any recalibration step, the 1-2) steps can be replaced by</p>
<ol type="1">
<li>Produce directly the ALCARECO, dropping all the unuseful collections and reducing the recHit maps to the one related to the electrons</li>
<li>nothing</li>
</ol>
<p>### Start from MINIAOD There is also the possibility to start from MINIAOD. In this case there is no way to produce the ALCARECO, but directly the ntuples.</p>
<p>AOD/AODSIM/RECO or AOD/RECO + RAW</p>
<ol type="1">
<li>produce the ALCARAW (EcalUncal{Z,W}Electron is the name of the centrally produced samples) from AOD/RECO+RAW: in this format most of the collections are dropped and only the electrons, the ECAL digis and few other collections like the beamspot, the conversions, the rhoFastJet are kept<ol type="a">
<li>apply a ZSkim or a ZSCSkim or a WSkim selection to reduce the size of the dataset </li>
</ol>
</li>
</ol>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 26 Jan 2017 for ECALELF by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
