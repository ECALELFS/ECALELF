<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ECALELF: Instructions for ALCARAW and ALCARECO production</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="page2">Instructions for ALCARAW and ALCARECO production </a></h1><h2><a class="anchor" id="ALCARECO_production">
ALCARECO production</a></h2>
<p>Steps for the production using the CERN batch system (launch from lxplus):</p>
<ol type="1">
<li>Check that there are no updates in the repository, this will merge automatically the updates in the master branch <div class="fragment"><pre class="fragment"> git pull 
</pre></div></li>
<li>Fill the alcareco_datasets.dat with the information of the desired run range It is convenient to add the new line at the bottom of the file. Please refere to the <a class="el" href="DATAFORMATS.html">Dataformats</a> file for information about how the alcareco_datasets.dat file is structured. For this step, in case of update of a growing dataset, please have a look to the "Production update" section below</li>
<li><div class="fragment"><pre class="fragment">   ./scripts/prodAlcareco.sh `parseDatasetFile.sh alcareco_datasets.dat |grep 22Jan | grep Run2012A` --tutorial
</pre></div> <div class="fragment"><pre class="fragment">   ./scripts/prodAlcareco.sh `parseDatasetFile.sh alcareco_datasets.dat |grep RelVal22Jan | grep Run2012A` --tutorial
</pre></div> use the --tutorial if you are testing the machinery: it will save the files in a separate directory on EOS (not the central one) use grep commands to select the proper line from alcareco_datasets.dat the script will create the crab task and submit it use --createOnly or --submitOnly if needed use --check to launch the check of the job results use the --isMC is the dataset is MC use the -s skim: ZSkim, WSkim, EleSkim for the preselection (ZSkim usually) use --scheduler=remoteGlidein if the dataset is not at T2_CH_CERN and you want to use the grid see ./scripts/prodAlcareco.sh --help for more informations</li>
<li>./scripts/prodAlcaraw.sh `parseDatasetFile.sh alcaraw_datasets.dat |grep 22Jan | grep Run2012A` --tutorial --check check the job status and output</li>
<li>Commit the changes to alcaraw_datasets.dat! <div class="fragment"><pre class="fragment">   git add alcareco_datasets.dat
   git commit -m <span class="stringliteral">&quot;message&quot;</span> 
</pre></div></li>
<li>The final output will be put: in the storage element indicated in the alcaraw_datasets.dat or alcareco_datasets.dat file in the subdir of the store/ directory indicated in the alcaraw_datasets.dat or alcareco_datasets.dat and following the structure indicated below: (STORAGE_ELEMENT)/(REMOTE_DIR)/ENERGY/(DATASETNAME)/(RUNRANGE) where ENERGY is 7TeV for 2011 datasets and 8TeV for 2012 datasets where the elements indicated in parethesys are taken from the alcaraw_datasets.dat file (or alcareco_datasets.dat) the REMOTE_DIR ends with sandbox/ if you are producing ALCARAW and alcareco/ for ALCARECO by default the output dir is the T2_CH_CERN: /eos/cms/store/group/alca_ecalcalib/[alcareco/sandbox]/[7TeV/8TeV]/DATASETNAME/RUNRANGE</li>
</ol>
<p>EXPERT: where REMOTE_DIR is specified by the --remote_dir option, ENERGY is 8TeV or 7TeV depending on the datasetpath, NAME is specified by the -n option and RUN_RANGE by the -r option</p>
<h3><a class="anchor" id="ALCARECO_growing">
UPDATE ALCARECO and ALCARAW for growing dataset</a></h3>
<p>In order to keep updated the ALCARECO and ALCARAW for Double and Single electron samples follow this instructions. The production will be in-sync with the availability of the new golden JSON file.</p>
<ol type="1">
<li>check that the new JSON is available executing the script ./scripts/updateLastDataset.sh The output gives the following informations:<ul>
<li>lastRun is the last run processed</li>
<li>max(run.run_number) is the last run in database</li>
<li>lastWeekRun is the last run not modified since four days at least</li>
<li>the last JSON It has to be verified that the lastWeekRun is greater than the last run in JSON. If it is not verified it is better to wait before proceeding. N.B: max(run.run_number) has to be always greater than the last run in JSON Then, copy and past the last updated line from the alcaraw_datasets.dat and change the run range accordingly </li>
</ul>
</li>
</ol>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 8 Sep 2014 for ECALELF by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
