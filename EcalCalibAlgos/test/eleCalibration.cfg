process Calibration =
{

# initialize  MessageLogger
 include "FWCore/MessageLogger/data/MessageLogger.cfi"

 source = PoolSource
   {
       untracked vstring fileNames = 
       {'rfio:/castor/cern.ch/cms/store/CSA06/CSA06-106-os-Wenu-0/ALCARECO/CMSSW_1_0_6-AlcastreamElectron-H3ded0a07bfd0450228a3006a0ff2e6a6/1025/14E929CB-2664-DB11-AC72-00304885ADAA.root',
       'rfio:/castor/cern.ch/cms/store/CSA06/CSA06-106-os-Wenu-0/ALCARECO/CMSSW_1_0_6-AlcastreamElectron-H3ded0a07bfd0450228a3006a0ff2e6a6/1025/9C4F1267-3164-DB11-A365-00304885AEDA.root',
       'rfio:/castor/cern.ch/cms/store/CSA06/CSA06-106-os-Wenu-0/ALCARECO/CMSSW_1_0_6-AlcastreamElectron-H3ded0a07bfd0450228a3006a0ff2e6a6/1025/D83B09AA-3D64-DB11-BF95-00304885AE44.root'}

       untracked int32 maxEvents = -1

   }

   # CTF track fit with material
   # magnetic field
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

   # cms geometry
   #include "Geometry/TrackerRecoData/data/trackerRecoGeometryXML.cfi"
   include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

   # tracker geometry
   include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

   # tracker numbering
   include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

   # KFUpdatoerESProducer
   include "TrackingTools/KalmanUpdators/data/KFUpdatorESProducer.cfi"

   # Chi2MeasurementEstimatorESProducer
   include "TrackingTools/KalmanUpdators/data/Chi2MeasurementEstimatorESProducer.cfi"

   # KFTrajectoryFitterESProducer
   include "TrackingTools/TrackFitters/data/KFTrajectoryFitterESProducer.cfi"

   # KFTrajectorySmootherESProducer
   include "TrackingTools/TrackFitters/data/KFTrajectorySmootherESProducer.cfi"

   # KFFittingSmootherESProducer
   include "TrackingTools/TrackFitters/data/KFFittingSmootherESProducer.cfi"

   # PropagatorWithMaterialESProducer
   include "TrackingTools/MaterialEffects/data/MaterialPropagator.cfi"

   # PropagatorWithMaterialESProducer
   include "TrackingTools/MaterialEffects/data/OppositeMaterialPropagator.cfi"
   
   # stripCPE
   include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
   include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"
   
   # pixelCPE
   include "RecoLocalTracker/SiPixelRecHits/data/PixelCPEParmError.cfi"
   
   #TransientTrackingBuilder
   include "RecoTracker/TransientTrackingRecHit/data/TransientTrackingRecHitBuilderWithoutRefit.cfi"
   include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"
   replace ctfWithMaterialTracks.src = "pixelMatchElectrons"
   replace ctfWithMaterialTracks.TTRHBuilder = "WithoutRefit"
   
module calibration = ElectronCalibration {
   string rootfile = "/usr/lorenzo/CSA06/myHistograms.root"    
#   string rootfile = "myHistograms.root"    
   InputTag ebRecHitsLabel = alCaIsolatedElectrons:alcaBarrelHits
   InputTag electronLabel = electronFilter
   InputTag trackLabel = ctfWithMaterialTracks
   string CALIBRATION_ALGO = "L3"    
   }

module out = PoolOutputModule
 {
        untracked vstring outputCommands =
          {
            "drop *",
            "keep recoElectrons_*_*_*",
            "keep recoSuperClusters_*_*_*"
          }
	  
#    untracked string fileName = "alcarecowithtracks.root"
    untracked string fileName = "/usr/lorenzo/CSA06/alcarecowithtracks.root"
 }

 path p = {calibration }

 endpath e = { out }

}
