<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ECALELF: Ntuple production</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ECALELF
   &#160;<span id="projectnumber">NAN</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Ntuple production </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="NTUPLE"></a>
Ntuple production</h1>
<p>Ntuples are produced starting from ALCARECO, ALCARECOSIM or ALCARERECO files. All commands should be executed from the Calibration/EcalAlCaRecoProducers directory.</p>
<p>alcareco_datasets.dat, alcarereco_datasets.dat provide the useful informations to build the list of files on EOS and process them. as for the alcareco and alcaraw productions, you have to provide such informations using the parseDatasetFile.sh script with the right book-keeping file.</p>
<h2><a class="anchor" id="fromALCARECO"></a>
From alcareco</h2>
<p>for data: </p>
<div class="fragment"><div class="line">./scripts/prodNtuples.sh `parseDatasetFile.sh alcareco_datasets.dat | grep {<span class="keywordtype">string</span> to select your dataset}` --type=ALCARECO --json jsonFile.txt --json_name &lt;jsonName&gt;</div>
</div><!-- fragment --><p> &lt;jsonName&gt; is a name used to build the subdirectory where storing the files and keep memory of the json file used for the ntuple production. Usual syntax is:</p>
<p>{runMin}-{runMax}_{rerecoName/prompt}_{version}:</p>
<ul>
<li>runMin is the minimum run in the json file</li>
<li>runMax is the maximum run in the json file</li>
<li>indicate prompt if is a json for prompt dataset, indicate the name of the rereco (e.g. 22Jan) if it is for a reprocessed data</li>
<li>indicate the version of the json For example, for the json file: <pre class="fragment"> /afs/cern.ch/cms/CAF/CMSCOMM/COMM_DQM/certification/Collisions12/8TeV/Reprocessing/Cert_190456-208686_8TeV_22Jan2013ReReco_Collisions12_JSON.txt
</pre> the jsonName should be: 190456-208686_22Jan-v1 for MC: <div class="fragment"><div class="line">./scripts/prodNtuples.sh `parseDatasetFile.sh alcareco_datasets.dat | grep {<span class="keywordtype">string</span> to select your dataset}` --type=ALCARECOSIM</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="fromALCARERECO"></a>
From alcarereco</h2>
<p>Better to use the quick script, but if you want to process only one specific dataset: </p>
<div class="fragment"><div class="line">./scripts/prodNtuples.sh `parseDatasetFile.sh alcarereco_datasets.dat | grep {<span class="keywordtype">string</span> to select your dataset}` --type=ALCARERECO </div>
</div><!-- fragment --><h2><a class="anchor" id="publishedData"></a>
From Published Data</h2>
<p>NB: You can produce NTuples from a published dataset by listing the location of the ALCARECO as</p>
<pre class="fragment">database </pre><p> in the file</p>
<div class="fragment"><div class="line">alcareco_datasets.dat </div>
</div><!-- fragment --><p>.</p>
<p>For example</p>
<pre class="fragment"> allRange /DYToEE_M-50_Tune4C_13TeV-pythia8/lcorpe-DYToEE_M-50-pythia8-Phys14-ZSkim-19May2015_allRange_v2-a98af318f27b1c189fe2b
 33712eaf929/USER DYToEE_M-50-pythia8-Phys14-ZSkim-19May2015_allRange_published_v2 caf database  VALID RUN2012A,RUN2012AB,RUN2012ABC,RUN2012ABCD</pre><p>And then following the regular workflow. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
