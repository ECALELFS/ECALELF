<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ECALELF: Generating PUDumper.root files</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ECALELF
   &#160;<span id="projectnumber">NAN</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Generating PUDumper.root files </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The PUDumper.root file is needed in order to generate a distribution of the number of vertices in MC. This is needed because the PU distribution in Data does not match and so the MC needs to be corrected. So info from the PUDumper is fed to the ZFitter executable via the -f option config.</p>
<p>The PUDumper.root file is automatically generated when producing ALCARECOSIM with the test/alcaSkimming CMSSW config. Unfortunately, at the moment, the cmsDriver setup does not allow for this.</p>
<p>Instructions for producing the file in the format needed are as follows:</p>
<p>First, pick one or two of your AODSIM files which you used to process the ALCARECO. For example, for the AODSIM sample: </p>
<pre class="fragment">/DYToEE_M-50_Tune4C_13TeV-pythia8/Phys14DR-PU40bx25_tsg_castor_PHYS14_25_V1-v2/AODSIM
</pre><p>Search for the dataset on the DAS: <a href="https://cmsweb.cern.ch/das/request?input=dataset%3D%2FDYToEE_M-50_Tune4C_13TeV-pythia8%2FPhys14DR-PU40bx25_tsg_castor_PHYS14_25_V1-v2%2FAODSIM&instance=prod%2Fphys03">https://cmsweb.cern.ch/das/request?input=dataset%3D%2FDYToEE_M-50_Tune4C_13TeV-pythia8%2FPhys14DR-PU40bx25_tsg_castor_PHYS14_25_V1-v2%2FAODSIM&amp;instance=prod%2Fphys03</a></p>
<p>And then click on</p>
<pre class="fragment">py </pre><p> to get a list of files: <a href="https://cmsweb.cern.ch/das/makepy?dataset=/DYToEE_M-50_Tune4C_13TeV-pythia8/Phys14DR-PU40bx25_tsg_castor_PHYS14_25_V1-v2/AODSIM&instance=prod/phys03">https://cmsweb.cern.ch/das/makepy?dataset=/DYToEE_M-50_Tune4C_13TeV-pythia8/Phys14DR-PU40bx25_tsg_castor_PHYS14_25_V1-v2/AODSIM&amp;instance=prod/phys03</a></p>
<p>Pick one or two of these, and define an environment variable in the command line: </p>
<pre class="fragment">file=/store/mc/Phys14DR/DYToEE_M-50_Tune4C_13TeV-pythia8/AODSIM/PU40bx25_tsg_castor_PHYS14_25_V1-v2/00000/02C3529A-BE99-E411-B110-0025B3E06516.root,/store/mc/Phys14DR/DYToEE_M-50_Tune4C_13TeV-pythia8/AODSIM/PU40bx25_tsg_castor_PHYS14_25_V1-v2/00000/0A1266B9-B799-E411-91A3-002590200A28.root</pre><p>And then run these files through ALCARECOSIM using test/alcaSkimming.py : </p>
<pre class="fragment">cd Calibration
cmsenv
source initCmsEnv.sh
cmsRun EcalAlCaRecoProducers/python/alcaSkimming.py isCrab=0 skim=ZSkim maxEvents=-1 type=ALCARECOSIM files=$file doTree=0 tagFile=EcalAlCaRecoProducers/config/reRecoTags/test75x.py</pre><p>This will produce a file PUDumper.root alongside the regular ALCARECO file.</p>
<p>Finally, you need to turn the PUDumper.root file into something useable by ZFitter. </p>
<pre class="fragment">./script/PUDumperToHist.sh -f PUDumper.root -o pufile.root
</pre><p>You can then simply include this file in your ZFitter input config.</p>
<p>And you are done! </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
