<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ECALELF: Ntuple production</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">index</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="NTUPLEPRODUCTION_">Ntuple production </a></h1><p>Ntuples are produced starting from:</p>
<ul>
<li>MINIAOD/MINIAODSIM</li>
<li>ALCARERECO</li>
<li>ALCARECO/ALCARECOSIM</li>
<li>AOD/AODSIM</li>
</ul>
<p>For more informations about the difference between the dataformats see <a class="el" href="DATAFORMATS.html">Dataformats</a></p>
<p>All commands should be executed from the Calibration/EcalAlCaRecoProducers directory.</p>
<dl class="user"><dt><b>Inputs:</b></dt><dd><ul>
<li>File with list of datasets, run ranges, location: <b>alcareco_datasets.dat</b> or <b>alcarereco_datasets.dat</b> For more information about the files see <a class="el" href="CONFIGFILES.html">Config files</a></li>
<li>json file (needed only for data)</li>
</ul>
</dd></dl>
<p><a class="el" href="NAMECONVENTIONS_.html">Name conventions in ECALELF</a> Convention for json name</p>
<p># Ntuple production The production is done by the </p>
<div class="fragment"><pre class="fragment">./scripts/prodNtuples.sh </pre></div><p> script.</p>
<p>For details about options, type </p>
<div class="fragment"><pre class="fragment">./scripts/prodNtuples.sh --help </pre></div><dl class="user"><dt><b>Example for production from MINIAOD</b></dt><dd><div class="fragment"><pre class="fragment">
./scripts/prodNtuples.sh `parseDatasetFile.sh alcarereco_datasets.dat | grep {string to select your dataset}` --type=MINIAOD --json_name=&lt;json_name&gt; --json=&lt;jsonfile.txt&gt; 
</pre></div></dd></dl>
<p>For MC you don't need the json related options but you need </p>
<div class="fragment"><pre class="fragment">--isMC </pre></div><p>By default only the "selected" ntuples is created. If you want any of the additional ntuples: </p>
<div class="fragment"><pre class="fragment">
 --doExtraCalibTree
 --doExtraStudyTree
 --doEleIDTree
</pre></div><p>Sometimes a fix in the ntuple producer needs to be tracked giving different names to the ntuples produced from the same dataset and with the same json. The option </p>
<div class="fragment"><pre class="fragment">--extraName=&lt;string&gt; </pre></div><p> can be used</p>
<h2><a class="anchor" id="S">
Step-by-step guide for production from MINIAOD</a></h2>
<ol type="1">
<li>fill the datasets in alcareco_data if not yet there</li>
<li>find the latest json file</li>
<li>define the right "json name" for the json as indicated in the <a class="el" href="NAMECONVENTIONS_.html">Name conventions in ECALELF</a></li>
<li>use CRAB3 to make the production</li>
<li>run the prodNtuples.sh script with the right options</li>
</ol>
<h2><a class="anchor" id="forExperts">
FOR EXPERTS: production from ALCARERECO</a></h2>
<p>Better to use the quick script, but if you want to process only one specific dataset: </p>
<div class="fragment"><pre class="fragment">./scripts/prodNtuples.sh `parseDatasetFile.sh alcarereco_datasets.dat | grep {<span class="keywordtype">string</span> to select your dataset}` --type=ALCARERECO 
</pre></div> </div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 26 Jan 2017 for ECALELF by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
