<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ECALELF: How to work with ECALELF ntuples</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ECALELF
   &#160;<span id="projectnumber">d6718b6cc30d69f18fde9018c5ae12f9d80bd7a5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../index.html">index</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">How to work with ECALELF ntuples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Go to the Calibration/ZFitter directory and compile it: </p>
<pre class="fragment">make</pre><p>Calibration/ZFitter will be your working directory now on. </p>
<hr/>
<p> Package content:</p>
<ul>
<li><a class="el" href="../../db/d44/classBW__CB__pdf__class.html" title="Breit-Wigner convoluted with Crystal Ball function PDF. ">BW_CB_pdf_class</a> Breit-Wigner convoluted with Crystal Ball function PDF.</li>
<li><a class="el" href="../../d6/d3e/classCruijff__pdf__class.html" title="Class providing a RooPdf corresponding to a Cruijff function (Gaussian with exponential tails) ...">Cruijff_pdf_class</a> Class providing a RooPdf corresponding to a Cruijff function (Gaussian with exponential tails)</li>
<li><a class="el" href="../../d5/d11/classElectronCategory__class.html" title="Di-electron events are selected using a short special syntax defined in this class. ">ElectronCategory_class</a> Di-electron events are selected using a short special syntax defined in this class.</li>
<li><a class="el" href="../../d8/dfa/classZFit__class.html" title="Zee Fit class: BW+CB and Cruijff. ">ZFit_class</a> Zee Fit class: BW+CB and Cruijff.</li>
<li><a class="el" href="../../d6/da1/classanyVar__class.html" title="class for estimation of basic quantities for any Float_t branch in the tree ">anyVar_class</a> class for estimation of basic quantities for any Float_t branch in the tree</li>
<li><a class="el" href="../../dd/d99/ZFitter_8cpp.html">ZFitter.cpp</a> General program for Z fit (monitoring, calibration validation)</li>
</ul>
<p>Input: While the classes are almost generic and flexible, the ZFitter program is thought to be used starting from ECALELF ntuples.</p>
<ul>
<li>data ntuples must contain:<ul>
<li>a tree "selected"</li>
</ul>
</li>
<li>mc ntuples must contain:<ul>
<li>a tree "selected"</li>
</ul>
</li>
<li>config files: see <a class="el" href="../../d8/d25/ZFitterConfigFiles.html">Config files syntax and generation</a><ul>
<li>ntuple config file: file containing the list of ntuples</li>
<li>run range config file: file containing a list of run ranges: every region will be checked in every run range in this file</li>
<li>category config file: file containing a list of regions (categories) for electrons it will be combined with the run range config file (if provided)</li>
</ul>
</li>
<li>options:<ul>
<li>selection common to all categories</li>
<li>selection</li>
<li>energy used for the invariant mass calculation (invMass_var)</li>
<li>(not implemented) bin/unbin/mixed: performe binned/unbinned fit or a mix version (unbinned for &lt; mixedSwitchValue events, binned otherwise)</li>
<li>(not implemented) mixed switch value: 200 by default</li>
</ul>
</li>
</ul>
<p>Two methods are used in order to evaluate the energy scale and resolution:</p>
<ul>
<li><b>fitMethod:</b> consists in fitting the Z lineshape with a parametric model (implemented in <a class="el" href="../../d8/dfa/classZFit__class.html" title="Zee Fit class: BW+CB and Cruijff. ">ZFit_class</a>) This method gives an estimate of the Z peak and width separately for data and MC. On the other hand the energy scale and energy resolution are estimated for electrons belonging to the same di-electron categories. With this method the energy scale and resolution are measured for di-electron categories.</li>
<li><b>smearingMethod:</b> consists in using the Z lineshape from MC after the scaling and smearing of the single electron energy (implemented in <a class="el" href="../../d1/d6a/classRooSmearer.html" title="Minimize NLL to get energy scale and smearings. ">RooSmearer</a>). The energy scale and smearing is applied to the single electron energy before calculating the invariant mass, so they are directly the single electron energy scale and smearings.</li>
<li><b>anyVarMethod:</b> consists in measuring the effective sigma (minimum interval containing 68% of the events) and the mean in the effective sigma interval of the invariant mass distribution</li>
</ul>
<p>The methods are implemented in separate classes, there is only one executable (./bin/ZFitter.exe) that with command line options can run the fitMethod or the smearingMethod or anyVarMethod</p>
<p>The inputs to the ZFitter program are given in the form of:</p>
<ul>
<li>configuration files (.dat)<ul>
<li>More info here: <a class="el" href="../../d8/d25/ZFitterConfigFiles.html">Config files syntax and generation</a></li>
</ul>
</li>
<li>command line options</li>
</ul>
<p>First, familiarize with the ntuple content: <a class="el" href="../../db/d60/NtupleStructure.html">Ntuple content and logic of use</a></p>
<p><a class="el" href="../../de/d29/PUFILES_.html">Generating PU weight files</a></p>
<p><a class="el" href="../../d0/d2a/plotNtuple.html">How to make plots using ECALELF ntuples</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
