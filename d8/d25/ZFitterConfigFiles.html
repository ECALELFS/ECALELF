<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ECALELF: Config files syntax and generation</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ECALELF
   &#160;<span id="projectnumber">d6718b6cc30d69f18fde9018c5ae12f9d80bd7a5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../index.html">index</a></li><li class="navelem"><a class="el" href="../../dd/df8/WORKNTUPLES.html">How to work with ECALELF ntuples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Config files syntax and generation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Di-electron events are selected using a short special syntax defined in this class.</p>
<p>In order to work with ECALELF ntuples you should move to the Calibration/ZFitter directory. Now on the paths are relative to the Calibration/ZFitter directory.</p>
<p>There are three important directories where the proper .dat files should be put:</p>
<ul>
<li><b>data/validation/</b> <br/>
 For the validation of rerecoes, the .dat files has to be put in a subdirectory of data/validation: ./data/validation/rereco/rerecoGroupName/ where <b>rerecoGroupName</b> is a name that you assign to a group of rerecoes that you want to test for example: you can use ./data/validation/rereco/Cal_Dic2013/ or ./data/validation/rereco/ungrouped/ this way the fit results will be put under the subdirectory rerecoGroupName and you will be able to move or remove it when the set of validations has finished. <br/>
 The logic of the validation .dat files is reported below in a dedicated section: <a class="el" href="../../d8/d25/ZFitterConfigFiles.html#validationConfig">Validation config files</a>.</li>
<li><b>data/regions/</b> <br/>
 the fits are done in categories, the conditions that the electrons have to fulfil are defined in .dat files in this directory. In each .dat file, a set of categories are defined, one category for each line: see <a class="el" href="../../d5/d11/classElectronCategory__class.html" title="Di-electron events are selected using a short special syntax defined in this class. ">ElectronCategory_class</a> for more information about the syntax <hr/>
 One di-electron category is difined by a series of cuts to be applied to both electrons</li>
</ul>
<dl class="section user"><dt>Syntax:</dt><dd><ul>
<li>'-' is the cut separator <br/>
 es. &lt;cut1&gt;-&lt;cut2&gt;-&lt;cut3&gt; <br/>
 es. EB-absEta_0_1-gold: <br/>
 three cuts are applied:<ul>
<li>EB -&gt; no parameters,</li>
<li>absEta_0_1 -&gt; two parameters 0 and 1 (parameters are separated by _,</li>
<li>gold -&gt; no parameters</li>
</ul>
</li>
<li>List of possible cuts without parameter: EB EE EB_EE EBp (EB+) EBm (EB-) EE EEp EEm RefReg</li>
<li>List of possible cuts with 1 parameter:<ul>
<li>Et_X: Et_</li>
<li>eleID_X: eleID == X</li>
<li>gainEle_X: 12, 6, 1, 6and1</li>
</ul>
</li>
<li>List of possible cuts with 2 parameters: <br/>
 <b> ATTENTION! Same syntax but different meaning! </b> <br/>
<ul>
<li><b>runNumber_X_Y:</b> X &lt;= runNumber &lt;= Y</li>
<li><b>IEta_X_Y:</b> X &lt;= ieta (or iX) &lt;= Y</li>
<li><b>absIEta_X_Y:</b> X &lt;= abs(ieta) &lt;= Y</li>
<li><b>distIEta_X_Y:</b> X-Y &lt;= ieta &lt;= X+Y</li>
<li><b>absEta_X_Y:</b> X &lt;= |eta| &lt; Y</li>
<li><b>energySC_X_Y:</b> X &lt;= energySCEle &lt; Y</li>
<li><b>nPV_X_Y:</b> X &lt;= nPV &lt; Y <hr/>
 For standard validations you can use the data/regions/validation.dat that is set in the scripts as the default one.</li>
</ul>
</li>
</ul>
</dd></dl>
<ul>
<li><p class="startli"><b>data/runRanges/</b> <br/>
 contains files that define a set of run ranges in order to perform the fits for the stability plots. The default one to be used is data/runRanges/monitoring.dat</p>
<p class="startli">The syntax is the following: </p>
<pre class="fragment">  #runMin-runMax nEvents        timeStampMin-timeStampMax
  190645-190781 28734           1333819264-1333983242
  190782-191042 24007           1334023525-1334188134
</pre><p> The second and third column are optional.</p>
<p class="startli">For more information on how to produce automatically the runRanges .dat files see: <a class="el" href="../../d8/d25/ZFitterConfigFiles.html#runDivide">How to produce runRanges .dat files</a></p>
</li>
</ul>
<h1><a class="anchor" id="validationConfig"></a>
Validation config files</h1>
<p>This config file contains the list of files to run on, the files containing the PU histograms for the PU reweighting and all the other files needed. The main idea in the ECALELF framework is to have a minimum set of variables in very small trees (the tree name is "selected"), while additional branches can be produced and added if needed as tree friends. The advantage is the possibility to produce ntuples for a larger set of studies with small specific trees for each of them.</p>
<p>The file is structured in 3 columns: tag, treeName and filePath as in the follows: </p>
<pre class="fragment"># commented lines
# tag   treeName        file
s1      selected        root://eoscms//eos/..../file.root
s2      selected        root://eoscms//eos/..../file.root
d1      selected        root://eoscms//eos/..../file.root
d       pileupHist      /afs/cern.ch/cms/CAF/CMSALCA/ALCA_ECALCALIB/ECALELF/puFiles/190456-204567-13Julv2_lastPrompt.69400.observed.root
s       pileupHist      /afs/cern.ch/cms/CAF/CMSALCA/ALCA_ECALCALIB/ECALELF/puFiles/nPU-Summer12_DD3.observed.root</pre><p>The first column (<b>tag</b>) indicates if this file is signal MC (s), background MC (b), or data (d).</p>
<p>The single samples are indicated by a number (s1, s2, etc., d1, d2, etc.)</p>
<p>The second column (<b>treeName</b>) is the name of the tree in the file</p>
<p>The third column (<b>filePath</b>) is the full path of the file files with the same tag and the same treeName are put in the same chain files with the same tag but different treeName are added as friends</p>
<p>For each <b>tag</b> (e.g. s1) one can have multiple chains with different <b>treeName</b> (e.g. selected, pileup, r9Weight, etc.), a chain with treeName=="selected" is mandatory since it is the main tree, all the other chains are considered as friends of the "selected".</p>
<h2><a class="anchor" id="pileupHist"></a>
How to get the pileup histogram</h2>
<p>Please see the dedicated page <a class="el" href="../../de/d29/PUFILES_.html">Generating PU weight files</a></p>
<h2><a class="anchor" id="pileup"></a>
How to produce ntuples with pileup weights</h2>
<p>In the config file the pileupHist must be indicated. When running the ZFitter.exe it will automatically calculate the weights and create the additional ntuples in the</p>
<div class="fragment"><div class="line">tmp/ </div>
</div><!-- fragment --><p> directory. To just produce the ntuples: </p>
<div class="fragment"><div class="line">./bin/ZFitter.exe -f data/validation/22Jan2012-stdMCAll.dat --savePUTreeWeight </div>
</div><!-- fragment --><p>It's sufficient to copy them from the tmp/ directory to another directory and to add them to the config file. Usually the pileupHist and pileup tree are put in the following directory: </p>
<div class="fragment"><div class="line">/afs/cern.ch/cms/CAF/CMSALCA/ALCA_ECALCALIB/ECALELF/puFiles/ </div>
</div><!-- fragment --><p>The tree name of the pileup weight files is <b>pileup:</b> </p>
<div class="fragment"><div class="line">s1    pileup    /afs/cern.ch/cms/CAF/CMSALCA/ALCA_ECALCALIB/ECALELF/puFiles/s1_pileupTrue....root</div>
</div><!-- fragment --><p>The pileupHist root files should be generated as indicated in <a class="el" href="../../de/d29/PUFILES_.html">Generating PU weight files</a></p>
<h1><a class="anchor" id="runDivide"></a>
How to produce runRanges .dat files</h1>
<p>The idea is to produce a file with the run ranges with 100k Zee events (to have enough statistics in the EE), but taking into account also that some run ranges should not be between to TSs or two era (RUN A and B).</p>
<p>The run ranges:</p>
<ul>
<li>put in the data/runRanges/runRangeLimits.dat the runNumber that should start a new run range (TSs for example)</li>
<li>run the command <div class="fragment"><div class="line">./bin/ZFitter.exe -f file.dat --runDivide </div>
</div><!-- fragment --></li>
</ul>
<p>The ZFitter.exe options are: </p>
<div class="fragment"><div class="line">--runDivide                                  execute the run division</div>
<div class="line">--nEvents_runDivide arg (=100000)            Minimum number of events in a </div>
<div class="line">                                             run range</div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
