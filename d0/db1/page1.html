<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ECALELF: Introduction</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ECALELF
   &#160;<span id="projectnumber">NAN</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Introduction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h6></h6>
<h1>ECALELF (Ecal CALibration with ELectrons Framework)</h1>
<h2>study and calibration with Zee and E/p</h2>
<h6></h6>
<p>All the code needed to the ECAL studies and calibration with Zee is available in this package.</p>
<p>The code in this package takes the name of ECALELF (Ecal CALibration with ELectrons Framework)</p>
<h3>The general calibration workflow is:</h3>
<div class="image">
<img src="../../ecalelf_schema.png" alt="ecalelf_schema.png"/>
</div>
 <ol type="1">
<li>start from AOD/RECO or AOD/RECO+RAW</li>
<li>apply a ZSkim or a ZSCSkim or a WSkim selection to reduce the size of the dataset</li>
<li>produce the ALCARAW (EcalUncal{Z,W}Electron is the name of the centrally produced samples) from AOD/RECO+RAW: in this format most of the collections are dropped and only the electrons, the ECAL digis and few other collections like the beamspot, the conversions, the rhoFastJet are kept</li>
<li>Apply whatever ECAL tags (ADCtoGeV, IC, LC, Alpha) needed for test or calibration and produce a new file in ALCARECO format. The new file has a reduced collection of calibrated rechit of the reco electrons, new SC collections produced with the new calibrated recHits, the old reco electrons with a new SC associated CAVEAT: all the electron variables are still the old RECO one, only the reference to the new SC has been updated. This will not be fixed, since it's a wanted feature that ensures that the selected events are not changed and permit to check effectively the impact of the calibration on the same events.</li>
<li>calculate new electron energies with the <a class="el" href="../../d5/dbe/classEleNewEnergiesProducer.html">EleNewEnergiesProducer</a> that creates ValueMaps that associate a float (the new energy) to the electrons</li>
<li>define if the electron pass some selections running the <a class="el" href="../../d6/d81/classEleSelectionProducers.html" title="Class saving ValueMaps of floats. ">EleSelectionProducers</a> that creates valueMaps of floats with the following meaning: for cut-based selections 1=pass, 0=fail for MVA selections the float is the output of the MVA</li>
<li>for MC, produce an association map between reco electron and gen electron (data-MC match)</li>
<li>produce a patElectron collection where the electronID floats and the new energies are imported by the patElectron and accessible by electron.electronID("selectionName") electron.userFloat("energyName") the gen electron identified by the data-MC matching step are embended in the patElectron and accessible by: electron.genLepton().eta() electron.genLepton().energy()</li>
<li>Filter the events requiring that the electron has passed at least one selection</li>
<li>dump the event content to a flat tree with one entry for Zee candidate (the variables are array of two elements with one electron per element)</li>
<li>Run the analysis tools (Z fitter, smearing, etc.)</li>
</ol>
<p>In case the purpose is just to run on a particular dataset without any recalibration step, the 1-3a) steps can be replaced by</p>
<ol type="1">
<li>Start from RECO or AOD</li>
<li>Produce directly the ALCARECO, dropping all the unuseful collections and reducing the recHit maps to the one related to the electrons</li>
<li>nothing </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
