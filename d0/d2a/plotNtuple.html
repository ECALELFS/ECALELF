<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ECALELF: How to make plots using ECALELF ntuples</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ECALELF
   &#160;<span id="projectnumber">NAN</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../index.html">index</a></li><li class="navelem"><a class="el" href="../../dd/df8/WORKNTUPLES.html">How to work with ECALELF ntuples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">How to make plots using ECALELF ntuples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>If you are interested only in using the fit for validations you can skip this paragraphs and go directly to "RERECO VALIDATION instructions"</p>
<p>The .dat config file keeping the list of ntuples can be modified according to the needs adding or commenting unuseful ntuples or friend trees. It's then important to have a simple way to merge the trees in order to be able to manipulate, scan and plot variables from the ntuples. The ZFitter/script/GenRootChains.sh has been designed for this.</p>
<p>running the command: </p>
<pre class="fragment">./script/GenRootChains.sh -f data/validation/myConfigFile.dat 
</pre><p> in the folder tmp/myConfigFile/ the s_chain.root and d_chain.root are created for MC and data respectively. The .root files have the TChains already defined, merging the files with the same treeName in the config file and adding the friends properly.</p>
<p>To work with ntuples you can do (see practical example below): </p>
<pre class="fragment">root -l tmp/myConfigFile/d_chain.root tmp/myConfigFile/s_chain.root
TTree * data = (TTree *) _file0-&gt;Get("selected");
TTree * signalA = (TTree *) _file1-&gt;Get("selected");
data    -&gt; Draw("*");
signalA -&gt; Draw("*");
</pre><h1>Data/MC plots</h1>
<p>A standard function for data/MC plots have been prepared and is available in python/plot.py. An example of how to use this library is in macro/standardDataMC.py</p>
<p>In the following you can find an example of production of data/MC plots with a config file with Moriond17 new regression</p>
<p>Simple:</p>
<pre class="fragment">./script/GenRootChains.sh -f data/validation/Moriond17_newRegr_v2.dat
python macro/standardDataMC.py absEta_0_1-gold "(160,80,100)" -d tmp/Moriond17_oldRegr/d_chain.root,"Moriond Data" -s tmp/Moriond17_oldRegr/s1_chain.root,"Moriond17 Madgraph MC"
</pre><pre class="fragment">./script/GenRootChains.sh -f data/validation/Moriond17_oldRegr.dat -f data/validation/Winter_2016_reReco_v1.dat

category="absEta_0_1-gold-EtLeading_32-EtSubLeading_20-noPF-isEle-eleID_cutBasedElectronID|Spring15|25ns|V1|standalone|loose"
binning="(160,80,100)"

WinterPow=tmp/Winter_2016_reReco_v1/s1_chain.root,"Winter2016 Powheg MC",invMass_SC_corr,energySCEle_corr
WinterMadgraph=tmp/Winter_2016_reReco_v1/s2_chain.root,"Winter2016 Madgraph MC",invMass_SC_corr,energySCEle_corr
MoriondMadgraph=tmp/Moriond17_oldRegr/s1_chain.root,"Moriond17 Madgraph MC",invMass_ECAL_ele,energy_ECAL_ele
MoriondHerwig=tmp/Moriond17_oldRegr/s2_chain.root,"Moriond17 Herwig MC",invMass_ECAL_ele,energy_ECAL_ele
MoriondData=tmp/Moriond17_oldRegr/d_chain.root,"Moriond17 Data",invMass_ECAL_ele

python macro/standardDataMC.py $category $binning -s "$WinterPow" -s "$WinterMadgraph" -s "$MoriondMadgraph" -d "$MoriondData" -x InvMass -n WinterMoriondComp_InvMass
</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
